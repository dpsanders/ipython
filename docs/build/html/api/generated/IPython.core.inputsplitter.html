<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module: core.inputsplitter &mdash; IPython 1.0.dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="IPython 1.0.dev documentation" href="../../index.html" />
    <link rel="up" title="The IPython API" href="../index.html" />
    <link rel="next" title="Module: core.inputtransformer" href="IPython.core.inputtransformer.html" />
    <link rel="prev" title="Module: core.hooks" href="IPython.core.hooks.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../../index.html"><img src="../../_static/logo.png" border="0" alt="IPython Documentation"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.core.inputtransformer.html" title="Module: core.inputtransformer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="IPython.core.hooks.html" title="Module: core.hooks"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" accesskey="U">The IPython API</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module: <tt class="docutils literal"><span class="pre">core.inputsplitter</span></tt></a><ul>
<li><a class="reference internal" href="#syntax-transformations">Syntax Transformations</a></li>
<li><a class="reference internal" href="#todo">ToDo</a></li>
<li><a class="reference internal" href="#authors">Authors</a></li>
<li><a class="reference internal" href="#classes">2 Classes</a></li>
<li><a class="reference internal" href="#functions">5 Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="IPython.core.hooks.html"
                        title="previous chapter">Module: <tt class="docutils literal docutils literal docutils literal docutils literal"><span class="pre">core.hooks</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="IPython.core.inputtransformer.html"
                        title="next chapter">Module: <tt class="docutils literal"><span class="pre">core.inputtransformer</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/generated/IPython.core.inputsplitter.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-IPython.core.inputsplitter">
<span id="module-core-inputsplitter"></span><h1>Module: <tt class="xref py py-mod docutils literal"><span class="pre">core.inputsplitter</span></tt><a class="headerlink" href="#module-IPython.core.inputsplitter" title="Permalink to this headline">¶</a></h1>
<p>Analysis of text input into executable blocks.</p>
<p>The main class in this module, <a class="reference internal" href="#IPython.core.inputsplitter.InputSplitter" title="IPython.core.inputsplitter.InputSplitter"><tt class="xref py py-class docutils literal"><span class="pre">InputSplitter</span></tt></a>, is designed to break
input from either interactive, line-by-line environments or block-based ones,
into standalone blocks that can be executed by Python as &#8216;single&#8217; statements
(thus triggering sys.displayhook).</p>
<p>A companion, <a class="reference internal" href="#IPython.core.inputsplitter.IPythonInputSplitter" title="IPython.core.inputsplitter.IPythonInputSplitter"><tt class="xref py py-class docutils literal"><span class="pre">IPythonInputSplitter</span></tt></a>, provides the same functionality but
with full support for the extended IPython syntax (magics, system calls, etc).</p>
<p>For more details, see the class docstring below.</p>
<div class="section" id="syntax-transformations">
<h2>Syntax Transformations<a class="headerlink" href="#syntax-transformations" title="Permalink to this headline">¶</a></h2>
<p>One of the main jobs of the code in this file is to apply all syntax
transformations that make up &#8216;the IPython language&#8217;, i.e. magics, shell
escapes, etc.  All transformations should be implemented as <em>fully stateless</em>
entities, that simply take one line as their input and return a line.
Internally for implementation purposes they may be a normal function or a
callable object, but the only input they receive will be a single line and they
should only return a line, without holding any data-dependent state between
calls.</p>
<p>As an example, the EscapedTransformer is a class so we can more clearly group
together the functionality of dispatching to individual functions based on the
starting escape character, but the only method for public use is its call
method.</p>
</div>
<div class="section" id="todo">
<h2>ToDo<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Should we make push() actually raise an exception once push_accepts_more()
returns False?</li>
<li>Naming cleanups.  The tr_* names aren&#8217;t the most elegant, though now they are
at least just attributes of a class so not really very exposed.</li>
<li>Think about the best way to support dynamic things: automagic, autocall,
macros, etc.</li>
<li>Think of a better heuristic for the application of the transforms in
IPythonInputSplitter.push() than looking at the buffer ending in &#8216;:&#8217;.  Idea:
track indentation change events (indent, dedent, nothing) and apply them only
if the indentation went up, but not otherwise.</li>
<li>Think of the cleanest way for supporting user-specified transformations (the
user prefilters we had before).</li>
</ul>
</div>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fernando Perez</li>
<li>Brian Granger</li>
</ul>
</div>
<div class="section" id="classes">
<h2>2 Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="IPython.core.inputsplitter.InputSplitter">
<em class="property">class </em><tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">InputSplitter</tt><a class="headerlink" href="#IPython.core.inputsplitter.InputSplitter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>An object that can accumulate lines of Python source before execution.</p>
<blockquote>
<div><dl class="docutils">
<dt>This object is designed to be fed python source line-by-line, using</dt>
<dd><a class="reference internal" href="#IPython.core.inputsplitter.InputSplitter.push" title="IPython.core.inputsplitter.InputSplitter.push"><tt class="xref py py-meth docutils literal"><span class="pre">push()</span></tt></a>. It will return on each push whether the currently pushed
code could be executed already. In addition, it provides a method called
<a class="reference internal" href="#IPython.core.inputsplitter.InputSplitter.push_accepts_more" title="IPython.core.inputsplitter.InputSplitter.push_accepts_more"><tt class="xref py py-meth docutils literal"><span class="pre">push_accepts_more()</span></tt></a> that can be used to query whether more input
can be pushed into a single interactive block.</dd>
</dl>
<p>This is a simple example of how an interactive terminal-based client can use
this tool:</p>
<div class="highlight-python"><pre>isp = InputSplitter()
while isp.push_accepts_more():
    indent = ' '*isp.indent_spaces
    prompt = '&gt;&gt;&gt; ' + indent
    line = indent + raw_input(prompt)
    isp.push(line)
print 'Input source was:</pre>
</div>
</div></blockquote>
<p>&#8216;, isp.source_reset(),</p>
<dl class="method">
<dt id="IPython.core.inputsplitter.InputSplitter.__init__">
<tt class="descname">__init__</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.InputSplitter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new InputSplitter instance.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.InputSplitter.push">
<tt class="descname">push</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.InputSplitter.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Push one or more lines of input.</p>
<p>This stores the given lines and returns a status code indicating
whether the code forms a complete Python block or not.</p>
<p>Any exceptions generated in compilation are swallowed, but if an
exception was produced, the method returns True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>lines</strong> : string</p>
<blockquote>
<div><p>One or more lines of Python input.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>is_complete</strong> : boolean</p>
<blockquote class="last">
<div><p>True if the current input source (the result of the current input
plus prior inputs) forms a complete Python execution block.  Note that
this value is also stored as a private attribute (<tt class="docutils literal"><span class="pre">_is_complete</span></tt>), so it
can be queried at any time.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.InputSplitter.push_accepts_more">
<tt class="descname">push_accepts_more</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.InputSplitter.push_accepts_more" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether a block of interactive input can accept more input.</p>
<p>This method is meant to be used by line-oriented frontends, who need to
guess whether a block is complete or not based solely on prior and
current input lines.  The InputSplitter considers it has a complete
interactive block and will not accept more input when either:</p>
<ul class="simple">
<li>A SyntaxError is raised</li>
<li>The code is complete and consists of a single line or a single
non-compound statement</li>
<li>The code is complete and has a blank line at the end</li>
</ul>
<p>If the current input produces a syntax error, this method immediately
returns False but does <em>not</em> raise the syntax error exception, as
typically clients will want to send invalid syntax to an execution
backend which might convert the invalid syntax into valid Python via
one of the dynamic IPython mechanisms.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.InputSplitter.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.InputSplitter.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the input buffer and associated state.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.InputSplitter.source_reset">
<tt class="descname">source_reset</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.InputSplitter.source_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the input source and perform a full reset.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter">
<em class="property">class </em><tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">IPythonInputSplitter</tt><big>(</big><em>line_input_checker=True</em>, <em>physical_line_transforms=None</em>, <em>logical_line_transforms=None</em>, <em>python_line_transforms=None</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#IPython.core.inputsplitter.InputSplitter" title="IPython.core.inputsplitter.InputSplitter"><tt class="xref py py-class docutils literal"><span class="pre">IPython.core.inputsplitter.InputSplitter</span></tt></a></p>
<p>An input splitter that recognizes all of IPython&#8217;s special syntax.</p>
<dl class="method">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.__init__">
<tt class="descname">__init__</tt><big>(</big><em>line_input_checker=True</em>, <em>physical_line_transforms=None</em>, <em>logical_line_transforms=None</em>, <em>python_line_transforms=None</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.push">
<tt class="descname">push</tt><big>(</big><em>lines</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Push one or more lines of IPython input.</p>
<p>This stores the given lines and returns a status code indicating
whether the code forms a complete Python block or not, after processing
all input lines for special IPython syntax.</p>
<p>Any exceptions generated in compilation are swallowed, but if an
exception was produced, the method returns True.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>lines</strong> : string</p>
<blockquote>
<div><p>One or more lines of Python input.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>is_complete</strong> : boolean</p>
<blockquote>
<div><p>True if the current input source (the result of the current input</p>
</div></blockquote>
<p><strong>plus prior inputs) forms a complete Python execution block.  Note that</strong> :</p>
<p><strong>this value is also stored as a private attribute (_is_complete), so it</strong> :</p>
<p class="last"><strong>can be queried at any time.</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the input buffer and associated state.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.source_raw_reset">
<tt class="descname">source_raw_reset</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.source_raw_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return input and raw source and perform a full reset.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.transform_cell">
<tt class="descname">transform_cell</tt><big>(</big><em>cell</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.transform_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Process and translate a cell of input.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.transforms">
<tt class="descname">transforms</tt><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.transforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Quick access to all transformers.</p>
</dd></dl>

<dl class="attribute">
<dt id="IPython.core.inputsplitter.IPythonInputSplitter.transforms_in_use">
<tt class="descname">transforms_in_use</tt><a class="headerlink" href="#IPython.core.inputsplitter.IPythonInputSplitter.transforms_in_use" title="Permalink to this definition">¶</a></dt>
<dd><p>Transformers, excluding logical line transformers if we&#8217;re in a
Python line.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h2>5 Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="IPython.core.inputsplitter.num_ini_spaces">
<tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">num_ini_spaces</tt><big>(</big><em>s</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.num_ini_spaces" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of initial spaces in a string.</p>
<p>Note that tabs are counted as a single space.  For now, we do <em>not</em> support
mixing of tabs and spaces in the user&#8217;s input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><strong>s</strong> : string</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><strong>n</strong> : int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IPython.core.inputsplitter.last_blank">
<tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">last_blank</tt><big>(</big><em>src</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.last_blank" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if the input source ends in a blank.</p>
<p>A blank is either a newline or a line consisting of whitespace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>src</strong> : string</p>
<blockquote class="last">
<div><p>A single or multiline string.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IPython.core.inputsplitter.last_two_blanks">
<tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">last_two_blanks</tt><big>(</big><em>src</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.last_two_blanks" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if the input source ends in two blanks.</p>
<p>A blank is either a newline or a line consisting of whitespace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>src</strong> : string</p>
<blockquote class="last">
<div><p>A single or multiline string.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IPython.core.inputsplitter.remove_comments">
<tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">remove_comments</tt><big>(</big><em>src</em><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.remove_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all comments from input source.</p>
<p>Note: comments are NOT recognized inside of strings!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>src</strong> : string</p>
<blockquote>
<div><p>A single or multiline input string.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first last"><strong>String with all Python comments removed.</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="IPython.core.inputsplitter.get_input_encoding">
<tt class="descclassname">IPython.core.inputsplitter.</tt><tt class="descname">get_input_encoding</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.core.inputsplitter.get_input_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the default standard input encoding.</p>
<p>If sys.stdin has no encoding, &#8216;ascii&#8217; is returned.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.core.inputtransformer.html" title="Module: core.inputtransformer"
             >next</a> |</li>
        <li class="right" >
          <a href="IPython.core.hooks.html" title="Module: core.hooks"
             >previous</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" >The IPython API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, The IPython Development Team.
      Last updated on Jul 21, 2013.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>